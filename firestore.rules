rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    match /{document=**} {
      // 읽기: 로그인된 모든 사용자(익명 포함) 허용
      allow read: if request.auth != null;

      // 쓰기: 익명 인증이 아닌 경우만 허용
      allow write: if request.auth != null
        && request.auth.token.firebase.sign_in_provider != 'anonymous';
    }
  }
}
